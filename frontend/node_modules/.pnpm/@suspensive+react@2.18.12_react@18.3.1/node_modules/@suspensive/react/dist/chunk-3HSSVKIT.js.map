{"version":3,"sources":["../src/Suspensive.tsx"],"sourcesContent":["import { type PropsWithChildren, useMemo } from 'react'\nimport { DefaultProps, DefaultPropsProvider } from './DefaultProps'\nimport { Message_DefaultProp_delay_ms_should_be_greater_than_0, SuspensiveError } from './models/SuspensiveError'\n\ntype LowercaseFirstLetter<TString extends string> = TString extends `${infer TFirst}${infer TRest}`\n  ? `${Lowercase<TFirst>}${TRest}`\n  : TString\n\ntype LowercaseFirstDepthFieldOf<TObject> = {\n  [TKey in keyof TObject as LowercaseFirstLetter<Extract<TKey, string>>]: TObject[TKey]\n}\n\n/**\n * @deprecated Use DefaultProps instead\n */\nexport class Suspensive {\n  public defaultProps?: LowercaseFirstDepthFieldOf<DefaultProps>\n\n  constructor(\n    /**\n     * @deprecated Use DefaultProps instead\n     */\n    config: {\n      /**\n       * @deprecated Use DefaultProps instead\n       */\n      defaultProps?: LowercaseFirstDepthFieldOf<DefaultProps>\n    } = {}\n  ) {\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    if (process.env.NODE_ENV === 'development' && typeof config.defaultProps?.delay?.ms === 'number') {\n      // eslint-disable-next-line @typescript-eslint/no-deprecated\n      SuspensiveError.assert(config.defaultProps.delay.ms > 0, Message_DefaultProp_delay_ms_should_be_greater_than_0)\n    }\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    this.defaultProps = config.defaultProps\n  }\n}\n\n/**\n * @deprecated Use DefaultPropsProvider instead\n */\ninterface SuspensiveProviderProps extends PropsWithChildren {\n  /**\n   * @deprecated Use DefaultPropsProvider instead\n   */\n  // eslint-disable-next-line @typescript-eslint/no-deprecated\n  value: Suspensive\n}\n\n/**\n * @deprecated Use DefaultPropsProvider instead\n */\n// eslint-disable-next-line @typescript-eslint/no-deprecated\nexport const SuspensiveProvider = ({ value, children }: SuspensiveProviderProps) => {\n  const defaultProps = useMemo(\n    () => new DefaultProps({ Delay: value.defaultProps?.delay, Suspense: value.defaultProps?.suspense }),\n    [value.defaultProps?.delay, value.defaultProps?.suspense]\n  )\n\n  return value.defaultProps ? (\n    <DefaultPropsProvider defaultProps={defaultProps}>{children}</DefaultPropsProvider>\n  ) : (\n    <>{children}</>\n  )\n}\n"],"mappings":";;;;;;;;;;;AAAA,SAAiC,eAAe;AA6D5C,SAEA,UAFA;AA9CG,IAAM,aAAN,MAAiB;AAAA,EAGtB,YAIE,SAKI,CAAC,GACL;AA5BJ;AA8BI,QAAI,QAAQ,IAAI,aAAa,iBAAiB,SAAO,kBAAO,iBAAP,mBAAqB,UAArB,mBAA4B,QAAO,UAAU;AAEhG,sBAAgB,OAAO,OAAO,aAAa,MAAM,KAAK,GAAG,qDAAqD;AAAA,IAChH;AAEA,SAAK,eAAe,OAAO;AAAA,EAC7B;AACF;AAiBO,IAAM,qBAAqB,CAAC,EAAE,OAAO,SAAS,MAA+B;AAtDpF;AAuDE,QAAM,eAAe;AAAA,IACnB,MAAG;AAxDP,UAAAA,KAAAC;AAwDU,iBAAI,aAAa,EAAE,QAAOD,MAAA,MAAM,iBAAN,gBAAAA,IAAoB,OAAO,WAAUC,MAAA,MAAM,iBAAN,gBAAAA,IAAoB,SAAS,CAAC;AAAA;AAAA,IACnG,EAAC,WAAM,iBAAN,mBAAoB,QAAO,WAAM,iBAAN,mBAAoB,QAAQ;AAAA,EAC1D;AAEA,SAAO,MAAM,eACX,oBAAC,wBAAqB,cAA6B,UAAS,IAE5D,gCAAG,UAAS;AAEhB;","names":["_a","_b"]}