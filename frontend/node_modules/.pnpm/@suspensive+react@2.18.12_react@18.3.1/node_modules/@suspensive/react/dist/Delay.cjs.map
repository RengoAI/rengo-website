{"version":3,"sources":["../src/Delay.tsx","../src/contexts/DefaultPropsContexts.ts","../src/hooks/useTimeout.ts","../src/models/SuspensiveError.ts"],"sourcesContent":["import { type ReactNode, useContext, useState } from 'react'\nimport { DelayDefaultPropsContext } from './contexts'\nimport { useTimeout } from './hooks'\nimport { Message_Delay_ms_prop_should_be_greater_than_or_equal_to_0, SuspensiveError } from './models/SuspensiveError'\n\nexport type DelayProps =\n  | {\n      ms?: number\n      fallback?: never\n      /**\n       * @experimental This is experimental feature.\n       */\n      children?: ({ isDelayed }: { isDelayed: boolean }) => ReactNode\n    }\n  | {\n      ms?: number\n      fallback?: ReactNode\n      children?: ReactNode\n    }\n\n/**\n * This component delays the rendering of its children for a specified duration.\n *\n * The Delay component provides a way to introduce intentional delays in rendering,\n * which can be useful for loading states or animations.\n * @see {@link https://suspensive.org/docs/react/Delay Suspensive Docs}\n */\nexport const Delay = (props: DelayProps) => {\n  if (process.env.NODE_ENV === 'development' && typeof props.ms === 'number') {\n    SuspensiveError.assert(props.ms >= 0, Message_Delay_ms_prop_should_be_greater_than_or_equal_to_0)\n  }\n  const defaultProps = useContext(DelayDefaultPropsContext)\n  const ms = props.ms ?? defaultProps.ms ?? 0\n\n  const [isDelayed, setIsDelayed] = useState(ms <= 0)\n  useTimeout(() => setIsDelayed(true), ms)\n\n  if (typeof props.children === 'function') {\n    return <>{props.children({ isDelayed })}</>\n  }\n\n  if (isDelayed) {\n    return <>{props.children}</>\n  }\n  if (props.fallback === undefined) {\n    return <>{defaultProps.fallback}</>\n  }\n  return <>{props.fallback}</>\n}\nif (process.env.NODE_ENV === 'development') {\n  Delay.displayName = 'Delay'\n}\n","import { createContext } from 'react'\nimport type { DelayProps, SuspenseProps } from '..'\nimport type { OmitKeyof } from '../utility-types'\n\nexport const DelayDefaultPropsContext = createContext<OmitKeyof<DelayProps, 'children'>>({\n  ms: undefined,\n  fallback: undefined,\n})\nif (process.env.NODE_ENV === 'development') {\n  DelayDefaultPropsContext.displayName = 'DelayDefaultPropsContext'\n}\n\nexport const SuspenseDefaultPropsContext = createContext<OmitKeyof<SuspenseProps, 'children'>>({\n  fallback: undefined,\n  clientOnly: undefined,\n})\nif (process.env.NODE_ENV === 'development') {\n  SuspenseDefaultPropsContext.displayName = 'SuspenseDefaultPropsContext'\n}\n","import { useCallback, useEffect, useRef } from 'react'\n\nexport const useTimeout = (fn: () => void, ms: number) => {\n  const fnRef = useRef(fn)\n  fnRef.current = fn\n  const fnPreserved = useCallback(() => fnRef.current(), [])\n  useEffect(() => {\n    const id = setTimeout(fnPreserved, ms)\n    return () => clearTimeout(id)\n  }, [fnPreserved, ms])\n}\n","export class SuspensiveError extends Error {\n  static assert(condition: boolean, message: string): asserts condition {\n    if (!condition) {\n      throw new SuspensiveError(message)\n    }\n  }\n}\n\nexport const Message_useErrorBoundary_this_hook_should_be_called_in_ErrorBoundary_props_children =\n  'useErrorBoundary: this hook should be called in ErrorBoundary.props.children'\n\nexport const Message_useErrorBoundaryFallbackProps_this_hook_should_be_called_in_ErrorBoundary_props_fallback =\n  'useErrorBoundaryFallbackProps: this hook should be called in ErrorBoundary.props.fallback'\n\nexport const Message_useErrorBoundaryGroup_this_hook_should_be_called_in_ErrorBoundary_props_children =\n  'useErrorBoundaryGroup: this hook should be called in ErrorBoundary.props.children'\n\nexport const Message_Delay_ms_prop_should_be_greater_than_or_equal_to_0 =\n  'Delay: ms prop should be greater than or equal to 0'\n\nexport const Message_DefaultProp_delay_ms_should_be_greater_than_0 = 'DefaultProps: delay.ms should be greater than 0'\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAA,gBAAqD;;;ACArD,mBAA8B;AAIvB,IAAM,+BAA2B,4BAAiD;AAAA,EACvF,IAAI;AAAA,EACJ,UAAU;AACZ,CAAC;AACD,IAAI,QAAQ,IAAI,aAAa,eAAe;AAC1C,2BAAyB,cAAc;AACzC;AAEO,IAAM,kCAA8B,4BAAoD;AAAA,EAC7F,UAAU;AAAA,EACV,YAAY;AACd,CAAC;AACD,IAAI,QAAQ,IAAI,aAAa,eAAe;AAC1C,8BAA4B,cAAc;AAC5C;;;AClBA,IAAAC,gBAA+C;AAExC,IAAM,aAAa,CAAC,IAAgB,OAAe;AACxD,QAAM,YAAQ,sBAAO,EAAE;AACvB,QAAM,UAAU;AAChB,QAAM,kBAAc,2BAAY,MAAM,MAAM,QAAQ,GAAG,CAAC,CAAC;AACzD,+BAAU,MAAM;AACd,UAAM,KAAK,WAAW,aAAa,EAAE;AACrC,WAAO,MAAM,aAAa,EAAE;AAAA,EAC9B,GAAG,CAAC,aAAa,EAAE,CAAC;AACtB;;;ACVO,IAAM,kBAAN,MAAM,yBAAwB,MAAM;AAAA,EACzC,OAAO,OAAO,WAAoB,SAAoC;AACpE,QAAI,CAAC,WAAW;AACd,YAAM,IAAI,iBAAgB,OAAO;AAAA,IACnC;AAAA,EACF;AACF;AAWO,IAAM,6DACX;;;AHoBS;AAXJ,IAAM,QAAQ,CAAC,UAAsB;AA3B5C;AA4BE,MAAI,QAAQ,IAAI,aAAa,iBAAiB,OAAO,MAAM,OAAO,UAAU;AAC1E,oBAAgB,OAAO,MAAM,MAAM,GAAG,0DAA0D;AAAA,EAClG;AACA,QAAM,mBAAe,0BAAW,wBAAwB;AACxD,QAAM,MAAK,iBAAM,OAAN,YAAY,aAAa,OAAzB,YAA+B;AAE1C,QAAM,CAAC,WAAW,YAAY,QAAI,wBAAS,MAAM,CAAC;AAClD,aAAW,MAAM,aAAa,IAAI,GAAG,EAAE;AAEvC,MAAI,OAAO,MAAM,aAAa,YAAY;AACxC,WAAO,2EAAG,gBAAM,SAAS,EAAE,UAAU,CAAC,GAAE;AAAA,EAC1C;AAEA,MAAI,WAAW;AACb,WAAO,2EAAG,gBAAM,UAAS;AAAA,EAC3B;AACA,MAAI,MAAM,aAAa,QAAW;AAChC,WAAO,2EAAG,uBAAa,UAAS;AAAA,EAClC;AACA,SAAO,2EAAG,gBAAM,UAAS;AAC3B;AACA,IAAI,QAAQ,IAAI,aAAa,eAAe;AAC1C,QAAM,cAAc;AACtB;","names":["import_react","import_react"]}