{"version":3,"sources":["../src/Delay.tsx"],"sourcesContent":["import { type ReactNode, useContext, useState } from 'react'\nimport { DelayDefaultPropsContext } from './contexts'\nimport { useTimeout } from './hooks'\nimport { Message_Delay_ms_prop_should_be_greater_than_or_equal_to_0, SuspensiveError } from './models/SuspensiveError'\n\nexport type DelayProps =\n  | {\n      ms?: number\n      fallback?: never\n      /**\n       * @experimental This is experimental feature.\n       */\n      children?: ({ isDelayed }: { isDelayed: boolean }) => ReactNode\n    }\n  | {\n      ms?: number\n      fallback?: ReactNode\n      children?: ReactNode\n    }\n\n/**\n * This component delays the rendering of its children for a specified duration.\n *\n * The Delay component provides a way to introduce intentional delays in rendering,\n * which can be useful for loading states or animations.\n * @see {@link https://suspensive.org/docs/react/Delay Suspensive Docs}\n */\nexport const Delay = (props: DelayProps) => {\n  if (process.env.NODE_ENV === 'development' && typeof props.ms === 'number') {\n    SuspensiveError.assert(props.ms >= 0, Message_Delay_ms_prop_should_be_greater_than_or_equal_to_0)\n  }\n  const defaultProps = useContext(DelayDefaultPropsContext)\n  const ms = props.ms ?? defaultProps.ms ?? 0\n\n  const [isDelayed, setIsDelayed] = useState(ms <= 0)\n  useTimeout(() => setIsDelayed(true), ms)\n\n  if (typeof props.children === 'function') {\n    return <>{props.children({ isDelayed })}</>\n  }\n\n  if (isDelayed) {\n    return <>{props.children}</>\n  }\n  if (props.fallback === undefined) {\n    return <>{defaultProps.fallback}</>\n  }\n  return <>{props.fallback}</>\n}\nif (process.env.NODE_ENV === 'development') {\n  Delay.displayName = 'Delay'\n}\n"],"mappings":";;;;;;;;;;;;;AAAA,SAAyB,YAAY,gBAAgB;AAsC1C;AAXJ,IAAM,QAAQ,CAAC,UAAsB;AA3B5C;AA4BE,MAAI,QAAQ,IAAI,aAAa,iBAAiB,OAAO,MAAM,OAAO,UAAU;AAC1E,oBAAgB,OAAO,MAAM,MAAM,GAAG,0DAA0D;AAAA,EAClG;AACA,QAAM,eAAe,WAAW,wBAAwB;AACxD,QAAM,MAAK,iBAAM,OAAN,YAAY,aAAa,OAAzB,YAA+B;AAE1C,QAAM,CAAC,WAAW,YAAY,IAAI,SAAS,MAAM,CAAC;AAClD,aAAW,MAAM,aAAa,IAAI,GAAG,EAAE;AAEvC,MAAI,OAAO,MAAM,aAAa,YAAY;AACxC,WAAO,gCAAG,gBAAM,SAAS,EAAE,UAAU,CAAC,GAAE;AAAA,EAC1C;AAEA,MAAI,WAAW;AACb,WAAO,gCAAG,gBAAM,UAAS;AAAA,EAC3B;AACA,MAAI,MAAM,aAAa,QAAW;AAChC,WAAO,gCAAG,uBAAa,UAAS;AAAA,EAClC;AACA,SAAO,gCAAG,gBAAM,UAAS;AAC3B;AACA,IAAI,QAAQ,IAAI,aAAa,eAAe;AAC1C,QAAM,cAAc;AACtB;","names":[]}