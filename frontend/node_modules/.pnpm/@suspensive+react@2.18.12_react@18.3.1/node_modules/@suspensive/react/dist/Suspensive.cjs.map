{"version":3,"sources":["../src/Suspensive.tsx","../src/contexts/DefaultPropsContexts.ts","../src/models/SuspensiveError.ts","../src/DefaultProps.tsx"],"sourcesContent":["import { type PropsWithChildren, useMemo } from 'react'\nimport { DefaultProps, DefaultPropsProvider } from './DefaultProps'\nimport { Message_DefaultProp_delay_ms_should_be_greater_than_0, SuspensiveError } from './models/SuspensiveError'\n\ntype LowercaseFirstLetter<TString extends string> = TString extends `${infer TFirst}${infer TRest}`\n  ? `${Lowercase<TFirst>}${TRest}`\n  : TString\n\ntype LowercaseFirstDepthFieldOf<TObject> = {\n  [TKey in keyof TObject as LowercaseFirstLetter<Extract<TKey, string>>]: TObject[TKey]\n}\n\n/**\n * @deprecated Use DefaultProps instead\n */\nexport class Suspensive {\n  public defaultProps?: LowercaseFirstDepthFieldOf<DefaultProps>\n\n  constructor(\n    /**\n     * @deprecated Use DefaultProps instead\n     */\n    config: {\n      /**\n       * @deprecated Use DefaultProps instead\n       */\n      defaultProps?: LowercaseFirstDepthFieldOf<DefaultProps>\n    } = {}\n  ) {\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    if (process.env.NODE_ENV === 'development' && typeof config.defaultProps?.delay?.ms === 'number') {\n      // eslint-disable-next-line @typescript-eslint/no-deprecated\n      SuspensiveError.assert(config.defaultProps.delay.ms > 0, Message_DefaultProp_delay_ms_should_be_greater_than_0)\n    }\n    // eslint-disable-next-line @typescript-eslint/no-deprecated\n    this.defaultProps = config.defaultProps\n  }\n}\n\n/**\n * @deprecated Use DefaultPropsProvider instead\n */\ninterface SuspensiveProviderProps extends PropsWithChildren {\n  /**\n   * @deprecated Use DefaultPropsProvider instead\n   */\n  // eslint-disable-next-line @typescript-eslint/no-deprecated\n  value: Suspensive\n}\n\n/**\n * @deprecated Use DefaultPropsProvider instead\n */\n// eslint-disable-next-line @typescript-eslint/no-deprecated\nexport const SuspensiveProvider = ({ value, children }: SuspensiveProviderProps) => {\n  const defaultProps = useMemo(\n    () => new DefaultProps({ Delay: value.defaultProps?.delay, Suspense: value.defaultProps?.suspense }),\n    [value.defaultProps?.delay, value.defaultProps?.suspense]\n  )\n\n  return value.defaultProps ? (\n    <DefaultPropsProvider defaultProps={defaultProps}>{children}</DefaultPropsProvider>\n  ) : (\n    <>{children}</>\n  )\n}\n","import { createContext } from 'react'\nimport type { DelayProps, SuspenseProps } from '..'\nimport type { OmitKeyof } from '../utility-types'\n\nexport const DelayDefaultPropsContext = createContext<OmitKeyof<DelayProps, 'children'>>({\n  ms: undefined,\n  fallback: undefined,\n})\nif (process.env.NODE_ENV === 'development') {\n  DelayDefaultPropsContext.displayName = 'DelayDefaultPropsContext'\n}\n\nexport const SuspenseDefaultPropsContext = createContext<OmitKeyof<SuspenseProps, 'children'>>({\n  fallback: undefined,\n  clientOnly: undefined,\n})\nif (process.env.NODE_ENV === 'development') {\n  SuspenseDefaultPropsContext.displayName = 'SuspenseDefaultPropsContext'\n}\n","export class SuspensiveError extends Error {\n  static assert(condition: boolean, message: string): asserts condition {\n    if (!condition) {\n      throw new SuspensiveError(message)\n    }\n  }\n}\n\nexport const Message_useErrorBoundary_this_hook_should_be_called_in_ErrorBoundary_props_children =\n  'useErrorBoundary: this hook should be called in ErrorBoundary.props.children'\n\nexport const Message_useErrorBoundaryFallbackProps_this_hook_should_be_called_in_ErrorBoundary_props_fallback =\n  'useErrorBoundaryFallbackProps: this hook should be called in ErrorBoundary.props.fallback'\n\nexport const Message_useErrorBoundaryGroup_this_hook_should_be_called_in_ErrorBoundary_props_children =\n  'useErrorBoundaryGroup: this hook should be called in ErrorBoundary.props.children'\n\nexport const Message_Delay_ms_prop_should_be_greater_than_or_equal_to_0 =\n  'Delay: ms prop should be greater than or equal to 0'\n\nexport const Message_DefaultProp_delay_ms_should_be_greater_than_0 = 'DefaultProps: delay.ms should be greater than 0'\n","import { type ContextType, type PropsWithChildren } from 'react'\nimport { DelayDefaultPropsContext, SuspenseDefaultPropsContext } from './contexts'\nimport { Message_DefaultProp_delay_ms_should_be_greater_than_0, SuspensiveError } from './models/SuspensiveError'\n\n/**\n * A class for configuring default props for Suspensive components.\n *\n * @example\n * ```tsx\n * const defaultProps = new DefaultProps({\n *   Delay: {\n *     ms: 1200,\n *     fallback: <LoadingMessage>Loading additional content...</LoadingMessage>\n *   },\n *   Suspense: {\n *     fallback: <Spinner>Fetching data...</Spinner>,\n *     clientOnly: false,\n *   },\n * })\n * ```\n */\nexport class DefaultProps {\n  Suspense?: ContextType<typeof SuspenseDefaultPropsContext>\n  Delay?: ContextType<typeof DelayDefaultPropsContext>\n\n  constructor(defaultProps: DefaultProps = {}) {\n    if (process.env.NODE_ENV === 'development' && typeof defaultProps.Delay?.ms === 'number') {\n      SuspensiveError.assert(defaultProps.Delay.ms > 0, Message_DefaultProp_delay_ms_should_be_greater_than_0)\n    }\n    this.Suspense = defaultProps.Suspense\n    this.Delay = defaultProps.Delay\n  }\n}\n\ninterface DefaultPropsProviderProps extends PropsWithChildren {\n  defaultProps: DefaultProps\n}\n\n/**\n * A provider component that controls the default settings of Suspensive components.\n * Use this to configure default props for Suspense, Delay, and other Suspensive components globally.\n *\n * @example\n * ```tsx\n * const defaultProps = new DefaultProps({\n *   Delay: {\n *     ms: 1000,\n *     fallback: <LoadingSpinner />\n *   },\n *   Suspense: {\n *     fallback: <Skeleton />,\n *     clientOnly: false,\n *   },\n * })\n *\n * function App() {\n *   return (\n *     <DefaultPropsProvider defaultProps={defaultProps}>\n *       <YourApp />\n *     </DefaultPropsProvider>\n *   )\n * }\n * ```\n *\n * @see {@link https://suspensive.org/docs/react/DefaultPropsProvider Suspensive Docs}\n */\nexport const DefaultPropsProvider = ({ defaultProps, children }: DefaultPropsProviderProps) => (\n  <DelayDefaultPropsContext.Provider value={defaultProps.Delay ?? {}}>\n    <SuspenseDefaultPropsContext.Provider value={defaultProps.Suspense ?? {}}>\n      {children}\n    </SuspenseDefaultPropsContext.Provider>\n  </DelayDefaultPropsContext.Provider>\n)\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAA,gBAAgD;;;ACAhD,mBAA8B;AAIvB,IAAM,+BAA2B,4BAAiD;AAAA,EACvF,IAAI;AAAA,EACJ,UAAU;AACZ,CAAC;AACD,IAAI,QAAQ,IAAI,aAAa,eAAe;AAC1C,2BAAyB,cAAc;AACzC;AAEO,IAAM,kCAA8B,4BAAoD;AAAA,EAC7F,UAAU;AAAA,EACV,YAAY;AACd,CAAC;AACD,IAAI,QAAQ,IAAI,aAAa,eAAe;AAC1C,8BAA4B,cAAc;AAC5C;;;AClBO,IAAM,kBAAN,MAAM,yBAAwB,MAAM;AAAA,EACzC,OAAO,OAAO,WAAoB,SAAoC;AACpE,QAAI,CAAC,WAAW;AACd,YAAM,IAAI,iBAAgB,OAAO;AAAA,IACnC;AAAA,EACF;AACF;AAcO,IAAM,wDAAwD;;;ACgDjE;AA/CG,IAAM,eAAN,MAAmB;AAAA,EAIxB,YAAY,eAA6B,CAAC,GAAG;AAzB/C;AA0BI,QAAI,QAAQ,IAAI,aAAa,iBAAiB,SAAO,kBAAa,UAAb,mBAAoB,QAAO,UAAU;AACxF,sBAAgB,OAAO,aAAa,MAAM,KAAK,GAAG,qDAAqD;AAAA,IACzG;AACA,SAAK,WAAW,aAAa;AAC7B,SAAK,QAAQ,aAAa;AAAA,EAC5B;AACF;AAkCO,IAAM,uBAAuB,CAAC,EAAE,cAAc,SAAS,MAA8B;AAlE5F;AAmEE,qDAAC,yBAAyB,UAAzB,EAAkC,QAAO,kBAAa,UAAb,YAAsB,CAAC,GAC/D,sDAAC,4BAA4B,UAA5B,EAAqC,QAAO,kBAAa,aAAb,YAAyB,CAAC,GACpE,UACH,GACF;AAAA;;;AHVE,IAAAC,sBAAA;AA9CG,IAAM,aAAN,MAAiB;AAAA,EAGtB,YAIE,SAKI,CAAC,GACL;AA5BJ;AA8BI,QAAI,QAAQ,IAAI,aAAa,iBAAiB,SAAO,kBAAO,iBAAP,mBAAqB,UAArB,mBAA4B,QAAO,UAAU;AAEhG,sBAAgB,OAAO,OAAO,aAAa,MAAM,KAAK,GAAG,qDAAqD;AAAA,IAChH;AAEA,SAAK,eAAe,OAAO;AAAA,EAC7B;AACF;AAiBO,IAAM,qBAAqB,CAAC,EAAE,OAAO,SAAS,MAA+B;AAtDpF;AAuDE,QAAM,mBAAe;AAAA,IACnB,MAAG;AAxDP,UAAAC,KAAAC;AAwDU,iBAAI,aAAa,EAAE,QAAOD,MAAA,MAAM,iBAAN,gBAAAA,IAAoB,OAAO,WAAUC,MAAA,MAAM,iBAAN,gBAAAA,IAAoB,SAAS,CAAC;AAAA;AAAA,IACnG,EAAC,WAAM,iBAAN,mBAAoB,QAAO,WAAM,iBAAN,mBAAoB,QAAQ;AAAA,EAC1D;AAEA,SAAO,MAAM,eACX,6CAAC,wBAAqB,cAA6B,UAAS,IAE5D,6EAAG,UAAS;AAEhB;","names":["import_react","import_jsx_runtime","_a","_b"]}