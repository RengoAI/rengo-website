"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _utils = require("./utils");
const triggerUpdater = (trigger, event, ...args) => {
  const doTrigger = (event, ...args) => new Promise((resolve, reject) => {
    const results = trigger(event, ...args);
    if (results && results.length) {
      Promise.all(results).catch(reject).then(resolvedResults => {
        let result;
        if (resolvedResults) {
          while ((0, _utils.isEmpty)(result) && resolvedResults.length) {
            result = resolvedResults.pop();
          }
        }
        resolve((0, _utils.isEmpty)(result) ? undefined : result);
      });
    } else {
      resolve();
    }
  });
  return event ? doTrigger(event, ...args) : doTrigger;
};
var _default = exports.default = triggerUpdater;